



PANRG                                                      J. van Bommel
Internet-Draft                                          T. Zaeschke, Ed.
Intended status: Informational                                ETH Zurich
Expires: 8 November 2025                                      7 May 2025


                       QUIC Multipath over SCION
               draft-zaeschke-scion-quic-multipath-latest

Abstract

   This document gives general recommendations when using the Multipath
   Extension for QUIC [QUIC-MP] with SCION
   [I-D.rustignoli-scion-overview].  The recommendations concern
   algorithms for congestion control and path selection, as well as
   general considerations for API design and applications that use
   multipath QUIC over SCION.

About This Document

   This note is to be removed before publishing as an RFC.

   The latest revision of this draft can be found at https://netsec-
   ethz.github.io/scion-quic-multipath_I-D/draft-zaeschke-scion-quic-
   multipath.html.  Status information for this document may be found at
   https://datatracker.ietf.org/doc/draft-zaeschke-scion-quic-
   multipath/.

   Discussion of this document takes place on the WG Working Group
   mailing list (mailto:panrg@irtf.org), which is archived at
   https://datatracker.ietf.org/rg/panrg.  Subscribe at
   https://www.ietf.org/mailman/listinfo/panrg/.

   Source for this draft and an issue tracker can be found at
   https://github.com/netsec-ethz/scion-quic-multipath_I-D.

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at https://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on 8 November 2025.

Copyright Notice

   Copyright (c) 2025 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents (https://trustee.ietf.org/
   license-info) in effect on the date of publication of this document.
   Please review these documents carefully, as they describe your rights
   and restrictions with respect to this document.

Table of Contents

   1.  Introduction
     1.1.  Terminology
   2.  Conventions and Definitions
   3.  Multipath Scenarios
     3.1.  Disjunctness
     3.2.  Path Metadata
   4.  Algorithms
     4.1.  MTU
     4.2.  Detecting Bad ASes and Links
     4.3.  Congestion Control
     4.4.  Path Selection
       4.4.1.  Hybrid approach
   5.  Applications (#apps}
     5.1.  Data Transfer
     5.2.  Low Latency
     5.3.  High Availability / Redundancy
   6.  API Design consideration
   7.  Security Considerations
   8.  IANA Considerations
   9.  References
     9.1.  Normative References
     9.2.  Informative References
   Acknowledgments
   Authors' Addresses

1.  Introduction

   The SCION protocol makes detailed path information available to
   endpoints.  Besides the 4-tuple of address/IP at each endpoint, the
   information includes a list of all traversed ASes and respective
   links between ASes, as well as metadata about ASes and links, such as
   MTU, bandwidth, latency, AS internal hopcount, or geolocation
   information.

   In the context of multipathing, this path information can be useful
   for algorithms that select paths (see Section 4.4) and perform
   congestion control (see Section 4.3).

   In order to facilitate these algorithms, this documents contains
   suggestions for API design and general use in applications.

   Multipath usage profiles are categorized into data transfer
   Section 5.1 , low latency Section 5.2 and high availability /
   redundancy Section 5.3.

   One example of an application / algorithm is discussed in [DMTP].

1.1.  Terminology

   *Autonomous System (AS)*: An autonomous system is a network under a
   common administrative control.  For example, the network of an
   Internet service provider or organization can constitute an AS.

   *Core AS*: Each SCION isolation domain (ISD) is administered by a set
   of distinguished autonomous systems (ASes) called core ASes, which
   are responsible for initiating the path discovery and path
   construction process (in SCION called "beaconing").

   *Data Plane*: The data plane (sometimes also referred to as the
   forwarding plane) is responsible for forwarding data packets that
   endpoints have injected into the network.  After routing information
   has been disseminated by the control plane, packets are forwarded by
   the data plane in accordance with such information.

   *Egress/Ingress*: refers to the direction of travel.  In SCION, path
   construction with beaconing happens in one direction, while actual
   traffic might follow the opposite direction.  This document clarifies
   on a case-by-case basis whether 'egress' or 'ingress' refers to the
   direction of travel of the SCION packet or to the direction of
   beaconing.

   *Endpoint*: An endpoint is the start or the end of a SCION path, as
   defined in [RFC9473].

   *Hop Field (HF)*: As they traverse the network, path segment
   construction beacons (PCBs) accumulate cryptographically protected
   AS-level path information in the form of Hop Fields.  In the data
   plane, Hop Fields are used for packet forwarding: they contain the
   incoming and outgoing interface IDs of the ASes on the forwarding
   path.

   *Info Field (INF)*: Each path segment construction beacon (PCB)
   contains a single Info field, which provides basic information about
   the PCB.  Together with Hop Fields (HFs), these are used to create
   forwarding paths.

   *Interface Identifier (Interface ID)*: A 16-bit identifier that
   designates a SCION interface at the end of a link connecting two
   SCION ASes, with each interface belonging to one border router.  Hop
   fields describe the traversal of an AS by a pair of interface IDs
   called ConsIngress and ConsEgress, as they refer to the ingress and
   egress interfaces in the direction of path construction (beaconing).
   The Interface ID MUST be unique within each AS.  Interface ID 0 is
   not a valid identifier as implementations MAY use it as the
   "unspecified" value.

   *Isolation Domain (ISD)*: In SCION, Autonomous Systems (ASes) are
   organized into logical groups called Isolation Domains or ISDs.  Each
   ISD consists of ASes that span an area with a uniform trust
   environment (e.g. a common jurisdiction).  A possible model is for
   ISDs to be formed along national boundaries or federations of
   nations.

   *Leaf AS*: An AS at the "edge" of an ISD, with no other downstream
   ASes.

   *MAC*: Message Authentication Code.  In the rest of this document,
   "MAC" always refers to "Message Authentication Code" and never to
   "Medium Access Control".  When "Medium Access Control address" is
   implied, the phrase "Link Layer Address" is used.

   *Path Authorization*: A requirement for the data plane is that
   endpoints can only use paths that were constructed and authorized by
   ASes in the control plane.  This property is called path
   authorization.  The goal of path authorization is to prevent
   endpoints from crafting Hop Fields (HFs) themselves, modifying HFs in
   authorized path segments, or combining HFs of different path
   segments.

   *Path Control*: Path control is a property of a network architecture
   that gives endpoints the ability to select how their packets travel
   through the network.  Path control is stronger than path
   transparency.

   *Path Segment*: Path segments are derived from path segment
   construction beacons (PCBs).  A path segment can be (1) an up segment
   (i.e. a path between a non-core AS and a core AS in the same ISD),
   (2) a down segment (i.e. the same as an up segment, but in the
   opposite direction), or (3) a core segment (i.e., a path between core
   ASes).  Up to three path segments can be used to create a forwarding
   path.

   *SCMP*: A signaling protocol analogous to the Internet Control
   Message Protocol (ICMP).  This is described in
   [I-D.dekater-scion-controlplane].

2.  Conventions and Definitions

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and
   "OPTIONAL" in this document are to be interpreted as described in
   BCP 14 [RFC2119] [RFC8174] when, and only when, they appear in all
   capitals, as shown here.

3.  Multipath Scenarios

   This document distinguishes the following usage scenarios:

   *  High bandwidth (HBW): Optimizing bandwidth by parallel transfer on
      multiple paths.

   *  Minimum latency (MinLat): Optimizing latency by regualrily
      checking multiple paths and using the one with the lowest latency.

   *  Minimum latencythrouh redundancy (MinLatRed): Optimizing latency
      by parallel transmission on multiple path.

   *  Failure tolerance (FT): Optimizing for failure tolerance by
      parallel transfer on multiple paths.

3.1.  Disjunctness

   For FT, paths are only interesting if they are disjuct.  For HWB,
   paths should mostly be disjunct, but overlap is acceptable if the
   overlapping links have high BW available.

   For MinLat and MinLatRed, path disjunctness is mostly irrelevant.

3.2.  Path Metadata

   SCION paths have associated metadata with latency and bandwidth
   information.  The values represent best case values and tend to be
   updated rarely, for example once a day.

   Path metadata may also be incomplete, ASes are not required to
   provide or regularly update the data.

   Users of path metadata must keep in mind that the data is mostly not
   verifyable but depends on the diligence and trusworthyness of the
   link owners.  However, once disseminated by a link owner, the patgh
   metadata is authenticated an cannot be changed by other parties.

   Due to the inherent unreliability, users should implement sanity
   checks the verify that a link holds up to the promised capabilities.

4.  Algorithms

4.1.  MTU

   SCION provides MTU information for every AS-level link on a path.

4.2.  Detecting Bad ASes and Links

   By comparing performance (latency, bandwidth, packet droprate, link
   errors, MTU) of multiple paths, we can (with some accuracy) detect
   unreliable links and ASes.  These can be blacklisted and excluded
   from further path selection, or possibly kept as backup paths for
   emergencies.

   *TODO* Add reference to ressearch.

   *TODO* Move to Path Metadata section?

4.3.  Congestion Control

   Congestion control for QUIC is discussed in QUIC Loss Detection and
   Congestion Control [RFC9002].

   More generally, congestion control for UDP is discussed in the UDP
   Usage Guidelines [RFC8085].  UDUp MTU discovery is further developed
   in [RFC8899].

   Congestion control is also discussed for TCP in [RFC6356].

4.4.  Path Selection

4.4.1.  Hybrid approach

   A hybrid approach could start with using low latency paths.  If the
   connection appears to be long lasting (e.g. at least 1 second
   duration and 1MB of traffic) it could start adding additional paths
   and see whether the traffic increases.  Additional paths can be
   chosen following the guidlines discussed in Section 5.1.

5.  Applications (#apps}

5.1.  Data Transfer

5.2.  Low Latency

5.3.  High Availability / Redundancy

6.  API Design consideration

   Applications will have very different requirments on a multipath API.
   A comprehensive API should therefore allow for mostly automatic
   selection of Section 4.4 Path Selection and Congestion Control
   algorithms Section 4.3.

   At the same time it should give access to SCION paths and their
   metadata to allow implementation of custom algorithms.

7.  Security Considerations

   This document has no security considerations.

   TODO ?

8.  IANA Considerations

   This document has no IANA actions.

9.  References

9.1.  Normative References

   [RFC6773]  Phelan, T., Fairhurst, G., and C. Perkins, "DCCP-UDP: A
              Datagram Congestion Control Protocol UDP Encapsulation for
              NAT Traversal", RFC 6773, DOI 10.17487/RFC6773, November
              2012, <https://www.rfc-editor.org/info/rfc6773>.

   [RFC6182]  Ford, A., Raiciu, C., Handley, M., Barre, S., and J.
              Iyengar, "Architectural Guidelines for Multipath TCP
              Development", RFC 6182, DOI 10.17487/RFC6182, March 2011,
              <https://www.rfc-editor.org/info/rfc6182>.

   [RFC9000]  Iyengar, J., Ed. and M. Thomson, Ed., "QUIC: A UDP-Based
              Multiplexed and Secure Transport", RFC 9000,
              DOI 10.17487/RFC9000, May 2021,
              <https://www.rfc-editor.org/info/rfc9000>.

   [RFC9001]  Thomson, M., Ed. and S. Turner, Ed., "Using TLS to Secure
              QUIC", RFC 9001, DOI 10.17487/RFC9001, May 2021,
              <https://www.rfc-editor.org/info/rfc9001>.

   [RFC9002]  Iyengar, J., Ed. and I. Swett, Ed., "QUIC Loss Detection
              and Congestion Control", RFC 9002, DOI 10.17487/RFC9002,
              May 2021, <https://www.rfc-editor.org/info/rfc9002>.

   [RFC8085]  Eggert, L., Fairhurst, G., and G. Shepherd, "UDP Usage
              Guidelines", BCP 145, RFC 8085, DOI 10.17487/RFC8085,
              March 2017, <https://www.rfc-editor.org/info/rfc8085>.

   [RFC8899]  Fairhurst, G., Jones, T., Tüxen, M., Rüngeler, I., and T.
              Völker, "Packetization Layer Path MTU Discovery for
              Datagram Transports", RFC 8899, DOI 10.17487/RFC8899,
              September 2020, <https://www.rfc-editor.org/info/rfc8899>.

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119,
              DOI 10.17487/RFC2119, March 1997,
              <https://www.rfc-editor.org/info/rfc2119>.

   [RFC8174]  Leiba, B., "Ambiguity of Uppercase vs Lowercase in RFC
              2119 Key Words", BCP 14, RFC 8174, DOI 10.17487/RFC8174,
              May 2017, <https://www.rfc-editor.org/info/rfc8174>.

9.2.  Informative References

   [DMTP]     John, T. and T. Riechard, "Deadline Aware Streams in MP-
              QUIC", March 2025.

   [RFC6356]  Raiciu, C., Handley, M., and D. Wischik, "Coupled
              Congestion Control for Multipath Transport Protocols",
              RFC 6356, DOI 10.17487/RFC6356, October 2011,
              <https://www.rfc-editor.org/info/rfc6356>.

   [RFC9473]  Enghardt, R. and C. Krähenbühl, "A Vocabulary of Path
              Properties", RFC 9473, DOI 10.17487/RFC9473, September
              2023, <https://www.rfc-editor.org/info/rfc9473>.

   [OLIA]     Khalili, R., Gast, N., Popovic, M., Upadhyay, U., and J.
              Le Boudec, "MPTCP is not pareto-optimal: performance
              issues and a possible solution", Proceedings of the 8th
              international conference on Emerging networking
              experiments and technologies, ACM , 2012.

   [QUIC-MP]  刘彦梅 (Liu, Y.), 马云飞 (Ma, Y.), De Coninck, Q., Bonaventure,
              O., Huitema, C., and M. Kuehlewind, "Multipath Extension
              for QUIC", 2025.

   [I-D.rustignoli-scion-overview]
              de Kater, C., Rustignoli, N., and A. Perrig, "SCION
              Overview", 2025, <https://datatracker.ietf.org/doc/draft-
              dekater-panrg-scion-overview/>.

   [I-D.dekater-scion-controlplane]
              de Kater, C., Frei, M., and N. Rustignoli, "SCION Control
              Plane", 2023, <https://datatracker.ietf.org/doc/draft-
              dekater-scion-controlplane/>.

Acknowledgments

   TODO acknowledge.

Authors' Addresses

   Jelte van Bommel
   ETH Zurich
   Email: tilmann.zaeschke@inf.ethz.ch


   Tilmann Zaeschke (editor)
   ETH Zurich
   Email: tilmann.zaeschke@inf.ethz.ch
